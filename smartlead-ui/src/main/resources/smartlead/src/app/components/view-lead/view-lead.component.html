<app-nav-bar></app-nav-bar>

<div class="container">

    <div class="mb-2">
        <h2>Lead details</h2>
    </div>

    <div class="row mb-2">
        <div class="col-sm-1">
            <button class="btn btn-sm btn-dark" (click)="goBack()"><i class="fas fa-arrow-left"></i> Back </button>
        </div>
        <div class="col">
            <hr>
        </div>
    </div>

    <div class="row">
        <div class="col-3">
            <div class="card mb-2">
                <div class="card-header bg-dark-blue">
                    <h5 class="mb-0">{{lead.firstName}} {{lead.lastName}}</h5>
                    <p class="mb-0"><em>{{lead.leadStage.stageName}}</em></p>
                </div>
                <div class="card-body bg-dark-blue">
                    <p class="font-size-90" *ngIf="lead.company">
                        <i class="fas fa-building mr-2"></i> {{lead.company}}
                    </p>
                    <p class="font-size-90" *ngIf="lead.email">
                        <i class="fas fa-envelope mr-2"></i> {{lead.email}}
                    </p>
                    <p class="font-size-90" *ngIf="lead.phone">
                        <i class="fas fa-phone-alt mr-2"></i> {{lead.phone}}
                    </p>
                    <p class="font-size-90" *ngIf="lead.address">
                        <i class="fas fa-map-marker-alt mr-2"></i> {{lead.address}}
                    </p>
                </div>
            </div>
            <div class="card">
                <div class="card-header bg-light-grey">
                    <h6 class="mb-0">Lead Properties</h6>
                </div>
                <div class="card-body">
                    <div class="row mb-2">
                        <div class="col-6 text-muted">Owner</div>
                        <div class="col-6">{{lead.owner.username}}</div>
                    </div>
                    <div class="row mb-2">
                        <div class="col-6 text-muted">Lead Source</div>
                        <div class="col-6">{{lead.leadSource.sourceName}}</div>
                    </div>
                    <div class="row mb-2">
                        <div class="col-6 text-muted">Lead Age</div>
                        <div class="col-6">{{lead.ageInDays}} {{lead.ageInDays > 1? 'days': 'day'}}</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-9">
            <div class="row">
                <div class="col-8">
                    <ul class="list-inline">
                        <li class="list-inline-item mr-3">
                            <a class="btn btn-light light-border" href="#" role="button" (click)="openSaveDocumentModal()">
                                <i class="far fa-calendar-plus mr-1"></i> Document </a>
                        </li>
                        <li class="list-inline-item mr-3">
                            <a class="btn btn-light light-border" href="#" role="button" (click)="openSaveNoteModal()">
                                <i class="far fa-edit mr-1"></i> Note </a>
                        </li>
                        <li class="list-inline-item mr-3">
                            <div ngbDropdown class="d-inline-block">
                                <a class="btn btn-light light-border" style="cursor: pointer;" role="button" id="dropdownAddTasks" ngbDropdownToggle>
                                    <i class="far fa-calendar-check"></i> Task </a>
                                <div ngbDropdownMenu aria-labelledby="dropdownAddTasks">
                                    <button ngbDropdownItem (click)="openSaveTaskModal('meeting')">
                                        <i class="far fa-calendar-alt mr-2"></i>Meeting
                                    </button>
                                    <button ngbDropdownItem (click)="openSaveTaskModal('follow-up')">
                                        <i class="fas fa-tasks mr-2"></i>Follow-Up
                                    </button>
                                    <button ngbDropdownItem (click)="openSaveTaskModal('site-visit')">
                                        <i class="far fa-building mr-2"></i>Site Visit
                                    </button>
                                    <button ngbDropdownItem (click)="openSaveTaskModal('phone-call')">
                                        <i class="fas fa-phone-volume mr-2"></i>Phone Call
                                    </button>
                                    <button ngbDropdownItem (click)="openSaveTaskModal('email')">
                                        <i class="far fa-envelope mr-2"></i>Email
                                    </button>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="col-4">

                </div>
            </div>
            <div>
                <ngb-tabset>
                    <ngb-tab>
                        <ng-template ngbTabTitle><span class="font-weight-500">Activity History</span></ng-template>
                        <ng-template ngbTabContent>
                            <app-tab-activity-history [leadId]="lead.leadId"></app-tab-activity-history>
                        </ng-template>
                    </ngb-tab>
                    <ngb-tab>
                        <ng-template ngbTabTitle><span class="font-weight-500">Lead Details</span></ng-template>
                        <ng-template ngbTabContent>
                            <app-tab-lead-details [lead]="lead"></app-tab-lead-details>
                        </ng-template>
                    </ngb-tab>
                    <ngb-tab>
                        <ng-template ngbTabTitle><span class="font-weight-500">Tasks</span></ng-template>
                        <ng-template ngbTabContent>
                            <app-tab-tasks [lead]="lead"></app-tab-tasks>
                        </ng-template>
                    </ngb-tab>
                    <ngb-tab>
                        <ng-template ngbTabTitle><span class="font-weight-500">Notes</span></ng-template>
                        <ng-template ngbTabContent>
                            <app-tab-notes [leadId]="lead.leadId"></app-tab-notes>
                        </ng-template>
                    </ngb-tab>
                    <ngb-tab>
                        <ng-template ngbTabTitle><span class="font-weight-500">Documents</span></ng-template>
                        <ng-template ngbTabContent>
                            <app-tab-documents [leadId]="lead.leadId"></app-tab-documents>
                        </ng-template>
                    </ngb-tab>
                </ngb-tabset>
            </div>
        </div>
    </div>

</div>

<app-footer></app-footer>